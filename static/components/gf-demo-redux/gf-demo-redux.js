define("components/gf-demo-redux/gf-demo-redux",function(e,t){function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){return function(t,n){var i=n().region,a=i.page,o=i.pageSize,d=i.search;f.demo.fetch(s({},d,{start:o*(e.page-1),limit:o})).then(function(n){t({type:"region/fetch",payload:{list:n.list,total:n.total,page:e.page||a}})})}}function a(){return function(e,t){var n=t().region,a=n.page,o=n.record;f.demo.create(o).then(function(){e({type:"region/closeDialog"}),e(i({page:a}))})}}function o(){return function(e,t){var n=t().region,a=n.page,o=n.record;f.demo.update(o).then(function(){e(i({page:a}))})}}function d(e){return function(t,n){var a=n().region.page;f.demo.remove(e).then(function(e){"0"===e.code&&p.message.success({content:"删除成功"}),t(i({page:a}))})}}var r="undefined"!=typeof r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Object.defineProperty(t,"__esModule",{value:!0}),t.name=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=e("node_modules/avalon2/dist/avalon"),c=n(l),m=e("node_modules/redux/dist/redux"),u=e("node_modules/redux-thunk/lib/index"),g=n(u),p=e("node_modules/ane/dist/ane"),f=e("services/storeService"),h=t.name="gf-demo-redux",b=function(e,t){switch(void 0===e&&(e={show:!1,isEdit:!1,list:[],total:0,page:1,pageSize:6,search:null,record:null}),t.type){case"region/closeDialog":return s({},e,{show:!1});case"region/fetch":return s({},e,t.payload);case"region/readyForAdd":return s({},e,{isEdit:!1,show:!0});case"region/readyForEdit":return s({},e,{isEdit:!0,show:!0});case"region/changeSearch":return s({},e,{search:t.payload});case"region/changeRecord":return s({},e,{record:t.payload});default:return e}},v=m.createStore<All>(m.combineReducers<All>{region:b},r.__REDUX_DEVTOOLS_EXTENSION__&&r.__REDUX_DEVTOOLS_EXTENSION__(),m.applyMiddleware(g.default));c.default.component(h,{template:'\n<div class="row">\n    <div class="col-xs-12 col-md-12">\n        <ms-dialog :widget="{$innerVm: \'demo_redux_form\', show: @show, onOk: @handleOk, title: @isEdit ? \'修改\' : \'新增\', onCancel: handleCancel}">\n            <div slot="body" ms-skip>\n                <div :important="demo_redux_form">\n                    <xmp is="ms-form" :widget="{$form: @$form}">\n                        <ms-form-item :widget="{label: \'ID\'}">\n                            <ms-input :widget="{value:@record.region_id,col: \'region_id\', $rules: { required: true, message: \'地区ID不能为空\' }}"></ms-input>\n                        </ms-form-item>\n                        <ms-form-item :widget="{label: \'名称\'}">\n                            <ms-input :widget="{value:@record.region_name,col: \'region_name\', $rules: { required: true, message: \'地区名称不能为空\' }}"></ms-input>\n                        </ms-form-item>\n                        <ms-form-item :widget="{label: \'PID\'}">\n                            <ms-input :widget="{value:@record.region_parent_id,col: \'region_parent_id\', $rules: { required: true, message: \'地区PID不能为空\' }}"></ms-input>\n                        </ms-form-item>\n                        <ms-form-item :widget="{label: \'套餐\'}" :for="($index, el) in @record.suites">\n                            <ms-input :widget="{value:el.name,col: \'suites[\' + $index + \'].name\'}"></ms-input>\n                        </ms-form-item>\n                    </xmp>\n                </div>\n            </div>\n        </ms-dialog>\n        <ms-form :widget="{$form:@$searchForm,type:\'search\',inline:true}">\n            <div class="row">\n                <div class="col-md-2">\n                    <ms-form-item :widget="{label: \'ID：\'}">\n                        <ms-input :widget="{col: \'region_id\', width: \'75%\'}"></ms-input>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-2">\n                    <ms-form-item :widget="{label: \'名称：\'}">\n                        <ms-input :widget="{col: \'region_name.firstName\', width: \'75%\'}"></ms-input>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-3">\n                    <ms-form-item :widget="{label: \'开始日期：\'}">\n                        <ms-datepicker :widget="{\n                            col:\'startDate\',\n                            placeholder:\'请选择开始日期\',\n                            width: \'70%\'\n                        }"></ms-datepicker>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-3">\n                    <ms-form-item :widget="{label: \'结束日期：\'}">\n                        <ms-datepicker :widget="{\n                            col:\'endDate\',\n                            placeholder:\'请选择结束日期\',\n                            width: \'70%\'\n                        }"></ms-datepicker>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-2">\n                    <button type="button" class="btn btn-primary" :click="@search">\n                        <span class="fa fa-search"></span>搜索\n                    </button>\n                    <button type="button" class="btn btn-success pull-right" :click="actions(\'add\')">\n                        <span class="fa fa-plus">\n                        </span>新增地区\n                    </button>\n                </div>\n            </div>\n        </ms-form>\n        <ms-table :widget="{data:@list,actions:@actions,pagination:@pagination,onChange:@handleTableChange}">\n            <ms-table-header :widget="{dataIndex:\'region_id\',type:\'selection\'}"></ms-table-header>\n            <ms-table-header :widget="{title:\'地区\',dataIndex:\'region_name\'}"></ms-table-header>\n            <ms-table-header :widget="{title:\'PID\',dataIndex:\'region_parent_id\'}"></ms-table-header>\n            <ms-table-header :widget="{title:\'操作\',dataIndex:\'region_id\'}">\n                <button type="button" class="btn btn-default btn-xs" :click="handle(\'edit\')"><i class="fa fa-edit"></i> 编辑</button>\n                <button type="button" class="btn btn-danger btn-xs" :click="handle(\'delete\')"><i class="fa fa-trash-o"></i> 删除</button>\n            </ms-table-header>\n        </ms-table>\n    </div>\n</div>\n',defaults:{show:!1,isEdit:!1,list:[],$searchForm:p.createForm({onFieldsChange:function(e,t){v.dispatch({type:"region/changeSearch",payload:t})}}),pagination:{current:1,total:0,pageSize:6},pattern:/^\d+-\d+-\d+( \d+:\d+:\d+)?$/,search:function(){this.fetch()},fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v.dispatch(i(e))},actions:function(e,t,n){"add"===e?(w.title="新增",w.record=f.demo.initialData(),v.dispatch({type:"region/readyForAdd"})):"edit"===e?(w.title="修改",w.record=n,v.dispatch({type:"region/readyForEdit"})):"delete"===e&&v.dispatch(d(n.region_id))},handleOk:function(){var e=this;w.$form.validateFields().then(function(t){t&&(v.dispatch(e.isEdit?o():a()),v.dispatch({type:"region/closeDialog"}))})},handleCancel:function(){v.dispatch({type:"region/closeDialog"})},handleTableChange:function(e){this.fetch({page:e.current})},mapStateToVm:function(){{var e=v.getState().region,t=e.show,n=e.isEdit,i=e.list,a=e.total,o=e.page,d=e.pageSize;e.search,e.record}this.list=i,this.pagination.total=a,this.pagination.current=o,this.pagination.pageSize=d,this.isEdit=n,this.show=t},onInit:function(){var e=this;this.mapStateToVm(),v.subscribe(function(){e.mapStateToVm()}),this.fetch()},onReady:function(){}}});var w=c.default.define({$id:"demo_redux_form",title:"",$form:p.createForm({record:f.demo.initialData(),onFieldsChange:function(e,t){v.dispatch({type:"region/changeRecord",payload:t})}}),record:f.demo.initialData()})});